import './polyfills.server.mjs';
import{$ as x,$c as N,Da as r,Gb as i,Ha as u,Hb as s,Hc as P,Ib as A,Ic as w,Jb as M,Jc as I,Lc as E,Ma as b,Mc as T,Ra as m,Rb as p,Tb as f,Ub as S,_c as O,aa as g,db as y,fb as _,ib as l,jb as e,kb as t,lb as d,pb as v,rb as h,sb as C}from"./chunk-SVHCQBQL.mjs";import"./chunk-X2SEQXRR.mjs";function z(c,o){c&1&&(e(0,"p",17),i(1," No transactions found. "),t())}function B(c,o){c&1&&(e(0,"a",21),d(1,"i",29),t())}function F(c,o){c&1&&(e(0,"a",22),d(1,"i",30),t())}function j(c,o){if(c&1&&(e(0,"div",18)(1,"div",19)(2,"div",20),y(3,B,2,0,"a",21)(4,F,2,0,"a",22),t(),e(5,"div",23)(6,"p",24),i(7),t(),e(8,"p",25),i(9),p(10,"date"),t()()(),e(11,"div",26)(12,"p",27),i(13),p(14,"currency"),t(),e(15,"div",28),i(16),t()()()),c&2){let n=o.$implicit;l("ngClass",n.type),r(3),_(n.type==="Credit"?3:4),r(4),s(n.description),r(2),s(f(10,8,n.date,"longDate")),r(3),l("ngClass",n.type==="Credit"?"text-success":"text-danger"),r(),M(" ",n.type==="Credit"?"+":"--"," ",S(14,11,n.amount,"USD","symbol")," "),r(3),A(" ",n.type==="Credit"?"Credit":"Debit")}}function U(c,o){if(c&1){let n=v();e(0,"button",31),h("click",function(){x(n);let D=C();return g(D.loadMore())}),i(1," Load More "),t()}}var k=class c{constructor(o,n){this._AccountService=o;this._Auth=n}account=null;transactions=[];displayedTransactions=[];loading=!0;error=null;itemsPerPage=5;currentPage=1;ngOnInit(){let o=this._Auth.getCurrentUser();if(!o){this.error="User not logged in",this.loading=!1;return}this._AccountService.getAllAccounts().subscribe({next:n=>{console.log("Accounts from API:",n),console.log("Current User:",o),this.account=n.find(a=>Number(a.userId)===Number(o.id))||null,console.log("Matched Account:",this.account),this.account?this._AccountService.getTransactionsByAccount(this.account.accountNo).subscribe({next:a=>{this.transactions=a,this.displayedTransactions=this.transactions.slice(0,this.itemsPerPage),this.loading=!1},error:()=>{this.error="Failed to load transactions",this.loading=!1}}):(this.error="No account found for this user",this.loading=!1)},error:()=>{this.error="Failed to load account",this.loading=!1}})}loadMore(){this.currentPage++;let o=this.transactions.slice(0,this.itemsPerPage*this.currentPage);this.displayedTransactions=o}static \u0275fac=function(n){return new(n||c)(u(N),u(O))};static \u0275cmp=b({type:c,selectors:[["app-my-account"]],decls:35,vars:9,consts:[[1,"account-container"],[1,"account-card"],[1,"d-flex"],[1,"navbar-brand","text-dark"],[1,"fa-regular","fa-credit-card","me-2"],[1,"subtitle","text-secondary"],[1,"account-info","col-lg-8","col-md-12","col-12","d-flex","justify-content-between"],[1,"account-item"],[1,"text-secondary","fw-bold","mb-1"],[1,"fw-bold"],[1,"accountType","text-white","text-center"],[1,"balance"],[1,"subtitle"],[1,"transactions"],["class","text-center text-secondary",4,"ngIf"],["class","transaction",3,"ngClass",4,"ngFor","ngForOf"],["class","btn btn-primary  mt-3 ",3,"click",4,"ngIf"],[1,"text-center","text-secondary"],[1,"transaction",3,"ngClass"],[1,"icon_and_left"],[1,"icon"],[1,"navbar-brand","text-success","me-2","card_icon","card_Back_icon"],[1,"navbar-brand","text-danger","me-2","card_icon","card_Back_icon"],[1,"tx-left"],[1,"tx-title"],[1,"tx-date"],[1,"tx-amount"],[1,"fw-bold","mb-1",3,"ngClass"],[1,"type","d-flex","justify-content-center"],[1,"upper-arrow","fa-solid","fa-arrow-trend-up"],[1,"fa-solid","fa-arrow-trend-down"],[1,"btn","btn-primary","mt-3",3,"click"]],template:function(n,a){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),d(4,"i",4),t(),e(5,"strong"),i(6,"Account Overview"),t()(),e(7,"p",5),i(8,"Your account details and current balance"),t(),e(9,"div",6)(10,"div",7)(11,"p",8),i(12," Account Number"),t(),e(13,"p",9),i(14),t()(),e(15,"div",7)(16,"p",8),i(17," Account Type "),t(),e(18,"p",10),i(19),t()(),e(20,"div",7)(21,"p",8),i(22," Current Balance"),t(),e(23,"p",11),i(24),p(25,"currency"),t()()()(),e(26,"div",1)(27,"h6"),i(28,"Recent Transactions"),t(),e(29,"p",12),i(30,"Your latest account activity"),t(),e(31,"div",13),m(32,z,2,0,"p",14)(33,j,17,15,"div",15),t(),m(34,U,2,0,"button",16),t()()),n&2&&(r(14),s(a.account==null?null:a.account.accountNo),r(5),s(a.account==null?null:a.account.accountType),r(5),s(f(25,6,a.account==null?null:a.account.balance,"USD")),r(8),l("ngIf",a.displayedTransactions.length===0),r(),l("ngForOf",a.displayedTransactions),r(),l("ngIf",a.displayedTransactions.length<a.transactions.length))},dependencies:[w,P,I,T,E],styles:[".account-container[_ngcontent-%COMP%]{max-width:98%;margin:20px auto;font-family:Arial,sans-serif}.account-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:15px;margin-bottom:20px;border:1px solid #e0e0e0}.subtitle[_ngcontent-%COMP%]{font-size:14px;color:#928f8f;margin-bottom:20px}.account-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:10px}.account-item[_ngcontent-%COMP%]{font-size:15px;color:#333}.balance[_ngcontent-%COMP%]{font-size:20px;color:#05bd83;font-weight:700}.transactions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.transaction[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:14px;background:#fff;border:1px solid #e0e0e0;border-radius:10px;box-shadow:0 2px 6px #0000000d}.icon_and_left[_ngcontent-%COMP%]{display:flex;gap:6px}.tx-title[_ngcontent-%COMP%]{font-weight:700;font-size:14px;margin:0}.tx-date[_ngcontent-%COMP%]{font-size:13px;color:#666;margin:0}.tx-amount[_ngcontent-%COMP%]{font-weight:700;font-size:15px}.type[_ngcontent-%COMP%]{font-size:12px;padding:2px 6px;border:1px solid #e0e0e0;border-radius:12px;margin-left:24px}.accountType[_ngcontent-%COMP%]{background-color:#05bd83;border-radius:12px;padding:2px 8px;display:inline-block}"]})};export{k as MyAccount};
